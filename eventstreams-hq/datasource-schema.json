
{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "type": "object",
    "title": "Datasource configuration",
    "properties": {
        "name": {  
           "propertyOrder": 10,
           "title": "Name",
           "type" : "string"
        },
        "desc": {  
           "propertyOrder": 20,
           "title": "Description",
           "type" : "string"
        },
        "sourceId": {  
           "propertyOrder": 30,
           "title": "Value of 'sourceId' field",
           "type" : "string"
        },
        "tags": {  
           "propertyOrder": 40,
           "title": "List of tags",
           "type" : "string"
        },
        "initialState": {  
           "propertyOrder": 50,
           "title": "Initial state",
           "type": "string",
           "enum": ["Stopped", "Started"]

        },
        "source": {
            "propertyOrder": 60,
            "title": "Source configuration",
            "type": "object",
            "oneOf": [
                { "$ref": "#/definitions/sourceFile", "title":"Log files" }
            ]
        },
        "sink": {
            "propertyOrder": 70,
            "title": "Sink configuration",
            "type": "object",
            "oneOf": [
                { "$ref": "#/definitions/sinkAkka", "title":"Akka endpoint" }
            ]
        }

        
    },
    "additionalProperties": false,
    "required": [ "name", "initialState","source","sink" ],
    "definitions": {
        "sourceFile": {
            "type": "object",
            "properties": {
                "class": {  
                   "propertyOrder": 10,
                   "title": "Type",
                   "type" : "string",
                   "template": "file"
                },
                "directory": {  
                   "propertyOrder": 20,
                   "title": "Directory",
                   "type" : "string"
                },
                "startWith": {
                  "propertyOrder": 21,
                  "title": "Start with",
                  "type": "string",
                  "enum": [
                    "Last",
                    "First"
                  ]
                },
                "fileOrdering": {
                  "propertyOrder": 22,
                  "title": "Order by",
                  "type": "string",
                  "enum": [
                    "Last Modified and Name",
                    "Name only"
                  ]
                },
                "mainPattern": {
                   "propertyOrder": 30,
                   "title": "Current filename pattern",
                   "type" : "string"
                },
                "rollingPattern": {  
                   "propertyOrder": 40,
                   "title": "Rolled filename pattern",
                   "type" : "string"
                }
            },
            "additionalProperties": false
        },
        "sinkAkka": {
            "type": "object",
            "properties": {
                "class": {  
                   "propertyOrder": 10,
                   "title": "Type",
                   "type" : "string",
                   "template": "akka"
                },
                "url": {  
                   "propertyOrder": 20,
                   "title": "URL",
                   "type" : "string"
                }
            },
            "additionalProperties": false
        }
    }
}   

